<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <!-- ì—¬ê¸°ì— í•„ìš”í•œ ìŠ¤íƒ€ì¼ì´ë‚˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš” -->
</head>

<body>
<div layout:fragment="content">

    <div class="product-info">
        <div class="avatar">
            <div class="rounded overflow-hidden">
                <img th:src="${product.image}" class="w-80 h-96 object-cover" />
            </div>
        </div>
        <div class="product-details">
            <h2>ì œí’ˆëª…:
                <span style="font-weight: bold; font-size: 12pt" th:text="${product.name}" ></span></h2>
            <p>ê°€ê²©: <span style="font-weight: bold; font-size: 12pt" th:text="${product.price}"></span> ì›</p>
        </div>
    </div>

    <form th:action="@{|/qna/${productId}|}" th:object="${qnaDto}" method="post">
        <h3>ì œëª©
            <span style="margin-left: 0.4rem; font-size: var(--fs-p1); color: var(--danger);">*</span>
        </h3>
        <input name="inquireContent" type="text" id="title" th:field="${qnaDto.title}"
               style="width: 350px; height: 30px; font-size: 13px; border:1px solid gray;" placeholder="15ì ì´ë‚´ ì…ë ¥" />
        <p th:if="${#fields.hasErrors('title')}" th:errors="${qnaDto.title}" class="fieldError"
           style="font-size: 17px; color: red; font-weight: bold;">Incorrect data</p>

        <h3>ë¬¸ì˜ ìœ í˜•
            <span style="margin-left: 0.4rem; font-size: var(--fs-p1); color: var(--danger);">*</span>
        </h3>
        <!-- ë¬¸ì˜ ìœ í˜• ë¼ë””ì˜¤ ë²„íŠ¼ ì¶”ê°€ -->
        <label for="radio-1">
            <input type="radio" id="radio-1" name="inquireType" class="radio" value="size" checked/>
            <span style="font-weight : bold ; font-size: 10pt">ì‚¬ì´ì¦ˆ</span>
        </label>
        <label for="radio-2">
            <input type="radio" id="radio-2" name="inquireType" class="radio" value="deliver" checked/>
            <span style="font-weight : bold ; font-size: 10pt">ë°°ì†¡</span>
        </label>
        <label for="radio-3">
            <input type="radio" id="radio-3" name="inquireType" class="radio" value="restock" checked/>
            <span style="font-weight : bold ; font-size: 10pt">ì¬ì…ê³ </span>
        </label>
        <label for="radio-4">
            <input type="radio" id="radio-4" name="inquireType" class="radio" value="detailed-inquiry" checked/>
            <span style="font-weight : bold ; font-size: 10pt">ìƒí’ˆìƒì„¸ë¬¸ì˜</span>
        </label>
        <!-- ë‹¤ë¥¸ ë¬¸ì˜ ìœ í˜• ë¼ë””ì˜¤ ë²„íŠ¼ë“¤ë„ ì¶”ê°€ -->

        <h3>ë¬¸ì˜ ë‚´ìš©
            <span style="margin-left: 0.4rem; font-size: var(--fs-p1); color: var(--danger);">*</span>
        </h3>
        <div>
            <input name="inquireContent" type="text" id="content" th:field="${qnaDto.content}"
                   style="width: 350px; height: 30px; font-size: 13px; border:1px solid gray;" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." />
            <input type="submit" value="Submit">
            <p th:if="${#fields.hasErrors('content')}" th:errors="${qnaDto.content}" class="fieldError"
               style="font-size: 17px; color: red; font-weight: bold;">Incorrect data</p>
        </div>
        <div class="form-control">
            <label class="label cursor-pointer">
                <h4 class="label-text">
                    <span>ë¹„ë°€ ê¸€ğŸ”‘</span>
                    <input type="checkbox" th:field="${qnaDto.secret}" th:checked="${qnaDto.secret}" class="checkbox" />
                </h4>
            </label>
        </div>
    </form>
</div>
</body>

<div layout:fragment="script">
    <script th:inline="javascript">
        // í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ê°€ ìˆë‹¤ë©´ ì¶”ê°€í•˜ì„¸ìš”
        function previewFiles() {
            var previewContainer = document.querySelector('#preview-container');
            var fileInput = document.querySelector('input[type=file]');
            var files = fileInput.files; // íŒŒì¼ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

            // ì—¬ëŸ¬ íŒŒì¼ì´ ì„ íƒë˜ì—ˆì„ ë•Œ
            if (files.length > 1) {
                alert('ì‚¬ì§„ì€ 1ì¥ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                fileInput.value = '';
                return;
            }


            var file = fileInput.files[0];

            var allowedExtensions = ['jpg', 'jpeg', 'png'];

            // íŒŒì¼ í¬ê¸° ì œí•œ
            var maxSize = 10 * 1024 * 1024;

            previewContainer.innerHTML = '';

            // íŒŒì¼ í™•ì¥ì ê°€ì ¸ì˜¤ê¸°
            var fileExtension = file.name.split('.').pop().toLowerCase();

            if (!allowedExtensions.includes(fileExtension)) {
                alert('jpg, jpeg, png í™•ì¥ìë§Œ í—ˆìš©ë©ë‹ˆë‹¤.');
                fileInput.value = '';
                return;
            }

            if (file.size > maxSize) {
                alert('íŒŒì¼ í¬ê¸°ê°€ 10MB ì œí•œì„ ì´ˆê³¼í•˜ëŠ” íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤. ë” ì‘ì€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                fileInput.value = '';
                return;
            }

            var reader = new FileReader();
            var previewImg = document.createElement('img');
            previewImg.height = 100;
            previewImg.alt = 'ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°';

            reader.onloadend = function () {
                previewImg.src = reader.result;
            };

            reader.readAsDataURL(file);
            previewContainer.appendChild(previewImg);
        }

        function checkFileSelected() {
            var fileInput = document.querySelector('input[type=file]');
            if (!fileInput.files.length) {
                alert('ì‚¬ì§„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return false; // form ì œì¶œ ì¤‘ë‹¨
            }
            return true; // form ì œì¶œ ê³„ì†
        }
    </script>
</div>

</html>