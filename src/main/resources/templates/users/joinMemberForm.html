<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="imagetoolbar" content="no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="title" content="웹사이트">
    <meta name="description" content="웹사이트입니다.">
    <meta name="keywords" content="키워드,키워드,키워드">
    <meta property="og:title" content="웹사이트">
    <meta property="og:description" content="웹사이트입니다">
    <meta property="og:image" content="https://웹사이트/images/opengraph.png">
    <meta property="og:url" content="https://웹사이트">
    <title>회원가입 | trend</title>
    <link rel="stylesheet" href="../css/setting.css">
    <link rel="stylesheet" href="../css/plugin.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/template.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
</head>

<body>
<!-- [S]personal-IGLRQ9N4JR -->
<div class="personal-IGLRQ9N4JR" data-bid="GolRQ9qGJY" id="">
    <div class="header-dim"></div>
</div>
<!-- [E]personal-IGLRQ9N4JR -->
<!-- [S]personal-KilRRk9Pzv -->
<div class="personal-KilRRk9Pzv" id="" data-bid="xFLRRKbMhp">
    <div class="header-inner">
        <div class="header-container container-lg">
            <div class="header-left">
                <h1 class="header-title">
                    <a href="javascript:void(0)">
                        <img src="/api/download/f74ed9655e104f7a9be2bb301805a630" alt="로고">
                    </a>
                </h1>
                <div class="header-mobile-group">
                    <div class="header-mobile-top">
                        <p>로그인이 필요합니다.</p>
                        <a href="javascript:void(0)">로그인</a>
                    </div>
                    <ul class="header-gnblist">
                        <li class="header-gnbitem item-active">
                            <button class="header-gnblink btn btn-ghost" href="javascript:void(0)">
                                <span>PRODUCTS</span>
                            </button>
                        </li>
                        <li class="header-gnbitem">
                            <button class="header-gnblink btn btn-ghost" href="javascript:void(0)">
                                <span>COMMUNITY</span>
                            </button>
                        </li>
                        <li class="header-gnbitem">
                            <button class="header-gnblink btn btn-ghost" href="javascript:void(0)">
                                <span>Q&amp;A</span>
                            </button>
                        </li>
                        <li class="header-gnbitem">
                            <button class="header-gnblink btn btn-ghost" href="javascript:void(0)">
                                <span>MEMBERSHIP</span>
                            </button>
                        </li>
                    </ul>
                    <button class="header-btn btn-close">
                        <img src="../icons/ico_close_white.svg" alt="닫기 아이콘">
                    </button>
                </div>
            </div>
            <div class="inputset inputset-lg">
                <button class="inputset-icon icon-right icon-search btn" type="button" aria-label="아이콘"></button>
                <input type="text" class="inputset-input form-control" style="height:35px; border:1px solid gray;"
                       placeholder="검색어를 입력해주세요." aria-label="내용">
            </div>
            <div class="header-right">
                <div class="header-utils">
                    <button class="header-btn btn-cart badgeset badgeset-circle badgeset-position badgeset-bottom-right">
                        <img src="../icons/ico_cart_black.svg" alt="쇼핑백 아이콘">
                        <span class="badgeset-text">1</span>
                    </button>
                    <a href="javascipt:void(0);" class="header-btn btn-user">
                        <img src="../icons/ico_user_black.svg" alt="유저 아이콘">
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="header-dim"></div>
</div>
<!-- [E]personal-KilRRk9Pzv -->
<!-- [S]personal-QxLRRa9Yn3 -->
<div class="personal-QxLRRa9Yn3" id="" data-bid="ZDlrrace5b">
    <div class="header-dim"></div>
</div>
<!-- [E]personal-QxLRRa9Yn3 -->
<!-- [S]personal-wnlRPr690h -->
<div class="personal-wnlRPr690h" id="" data-bid="balrpxvERo">
    <div class="header-dim"></div>
</div>
<!-- [E]personal-wnlRPr690h -->
<!-- [S]personal-ZhlRREegy7 -->
<div class="personal-ZhlRREegy7" data-bid="DrlRReh9t1" id="">
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
</div>
<!-- [E]personal-ZhlRREegy7 -->
<!-- [S]personal-ZhlRREegy7 -->
<div class="personal-ZhlRREegy7" data-bid="CkLRrEXPZL" id="">
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
</div>
<!-- [E]personal-ZhlRREegy7 -->
<!-- [S]personal-jglrrGe28m -->
<div class="personal-jglrrGe28m" id="" data-bid="WvLRrgEl9J">
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
    <div style="display:flex; justify-content: center; margin-bottom: 50px; margin-top: 60px;">
        <h1 style="font-weight: bold; text-decoration-line: underline; ">회원가입</h1>
    </div>
</div>
<!-- [E]personal-jglrrGe28m -->
<!-- [S]personal-ZhlRREegy7 -->
<div class="personal-ZhlRREegy7" data-bid="mGLrREf8w7" id="">
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
</div>
<!-- [E]personal-ZhlRREegy7 -->
<!-- [S]basic-N10 -->
<div class="basic-N10" data-bid="ellrq88O6E" id="">
</div>
<!-- [E]basic-N10 -->
<!-- [S]personal-ZhlRREegy7 -->
<div class="personal-ZhlRREegy7" data-bid="yTlRREGbxB" id="">
    <link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}">
</div>
<!-- [E]personal-ZhlRREegy7 -->
<main class="th-layout-main th-layout-side">
    <div class="th-layout-content">
        <form action="/members/join" method="post" th:object="${signupFormDto}" >
            <input class="custom-input" type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

            <div class="agree-box">
                <div class="contents-agree-box-1">
                    <div class="contents-agree-all">
                        <div class="checkset">
                            <input id="check-all" class="input-fill" type="checkbox" th:field="*{agreeAll}" checked=""
                                   onclick="toggleAllAgreements()">
                            <label class="checkset-label" for="check-all"></label>
                            <span class="checkset-text">모두 동의</span>
                        </div>
                    </div>
                </div>
                <div class="contents-agree-box-2">
                    <div class="contents-agree">
                        <div class="checkset">
                            <input id="basic-N37-3" class="input-fill" type="checkbox" th:field="*{agreeInfo}"
                                   checked="">
                            <label class="checkset-label" for="basic-N37-3">개인정보 수집/이용 약관에 동의 합니다. (필수)</label>
                            <span class="checkset-text"></span>
                        </div>
                    </div>
                    <div class="contents-agree">
                        <div class="checkset">
                            <input id="basic-N37-4" class="input-fill" type="checkbox" th:field="*{agreeAge}"
                                   checked="">
                            <label class="checkset-label" for="basic-N37-4">만 14세 이상. (필수)</label>
                            <span class="checkset-text"></span>
                        </div>
                    </div>
                    <div class="contents-agree">
                        <div class="checkset">
                            <input id="basic-N37-10" class="input-fill" type="checkbox" th:field="*{agreeEmail}"
                                   checked="">
                            <label class="checkset-label" for="basic-N37-10">이메일 수신에 동의 합니다.(선택)</label>
                            <span class="checkset-text"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 기본 정보 입력 -->
            <div style="display:flex; flex-direction: column; align-items: center; margin-bottom: 20px;">
                <!-- 아이디 입력 -->
                <div>
                    <h3 style="padding-top: 20px;">아이디를 입력하세요<span
                            style="margin-left: 0.4rem; font-size: var(--fs-p1); color: var(--danger);">*</span>
                    </h3>
                    <input name="loginId" type="text" th:field="*{loginId}"
                           style="width: 350px; height: 30px; font-size: 13px; border:1px solid gray;"
                           placeholder="아이디입력" required>
                    <h6 style="color: rgba(59, 130, 246); margin-bottom: 10px;">영문 소문자, 숫자 포함 4~12자</h6>
                </div>
                <p th:if="${#fields.hasErrors('loginId')}" th:errors="*{loginId}" class="fieldError"
                   style="font-size: 17px; color: red; font-weight: bold;">Incorrect
                    data</p>

                <!-- 비밀번호 입력 -->
                <div>
                    <h3>비밀번호를 입력하세요<span
                            style="margin-left: 0.4rem; font-size: var(--fs-p1); color: var(--danger);">*</span>
                    </h3>
                    <input name="password" type="password" th:field="*{password}"
                           style="width: 350px; height: 30px; font-size: 13px; border:1px solid gray;"
                           placeholder="비밀번호 입력" required>
                    <h6 style="color: rgba(59, 130, 246); margin-bottom: 5px;">영문 대/소문자, 숫자, 특수기호 포함 8~16자</h6>
                </div>
                <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="fieldError"
                   style="font-size: 17px; color: red; font-weight: bold;">Incorrect
                    data</p>

                <!-- 비밀번호 확인 -->
                <div>
                    <input name="checkPassword" type="password" th:field="*{checkPassword}"
                           style="width: 350px; height: 30px; font-size: 13px; border:1px solid gray;"
                           placeholder="비밀번호 확인" required>
                </div>

                <div style="margin-top: 10px; display: flex; align-items: center;">
                    <!-- 이메일 주소 입력 -->

                    <!-- 이메일 도메인 선택 -->
                    <div style="display: flex; align-items: center; background-color: #f5f5f5; border: 1px solid gray; border-radius: 0 3px 3px 0;">
                        <input id="email" name="email" th:field="*{email}"
                               style="width:143px; height:30px; font-size: 13px; border: none; outline: none;"
                               placeholder="이메일주소" required>
                        <span style="font-size: 13px; padding: 0 8px;">@</span>
                        <select id="emailDomain" name="emailDomain" th:field="*{emailDomain}"
                                style="width:143px; height:30px; font-size: 13px; border: none; outline: none;"
                                class="form-select"
                                aria-label="Default select example">
                            <option value="naver.com" th:selected="${signupFormDto.emailDomain == 'naver.com'}">naver.com</option>
                            <option value="hanmail.net" th:selected="${signupFormDto.emailDomain == 'hanmail.net'}">hanmail.net</option>
<<<<<<< HEAD
                            <option value="gmail.com" th:selected="${signupFormDto.emailDomain == 'gmail.com'}">gmail.com</option>
=======
                            <option value="google.com" th:selected="${signupFormDto.emailDomain == 'google.com'}">google.com</option>
>>>>>>> origin/feature/register-user
                            <option value="nate.com" th:selected="${signupFormDto.emailDomain == 'nate.com'}">nate.com</option>
                        </select>
                    </div>


                    <!-- 본인인증 버튼 -->
                    <button id="verificationButton" type="button" class="btn btn-outline-secondary"
                            style="height:30px; margin-left: 10px;"
                            onclick="requestVerification()">인증하기
                    </button>


                </div>
                <!-- 3분 타이머 및 인증번호 입력 -->
                <div id="verificationSection" style="display: none; margin-top: 10px; align-items: center;">
                    <div id="timer">3:00</div>
                    <input id="verificationCode" type="text"
                           style="width: 100px; height: 30px; font-size: 13px; border: 1px solid gray; margin-left: 10px;"
                           placeholder="인증번호">
                    <button type="button" class="btn btn-outline-secondary" style="height:30px; margin-left: 10px;"
                            onclick="confirmVerification()">인증확인
                    </button>
                    <button type="button" class="btn btn-outline-secondary" style="height:30px; margin-left: 10px;"
                            onclick="resendVerification()">재전송
                    </button>
                </div>
                <div id="verificationComplete" style="display: none; color: blue; margin-top: 10px;">
                    인증 성공
                </div>
            </div>

            <!-- 추가 정보 입력 -->
            <div style="display: flex; flex-direction: column; align-items:center;">

                <!-- 이름 입력 -->
                <div>
                    <h3>이름</h3>
                    <input name="name" type="text" th:field="*{username}"
                           style="width: 150px; height: 30px; font-size: 13px; margin-bottom:10px; border:1px solid gray;">
                </div>
                <p th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="fieldError"
                   style="font-size: 17px; color: red; font-weight: bold;">Incorrect
                    data</p>

                <!-- 생년월일 입력 -->
                <div>
                    <h3>생년월일</h3>
                    <!-- Thymeleaf syntax for date inputs -->
                    <div style="display: flex; margin-bottom: 40px;">
                        <input name="birthYear" th:field="*{year}"
                               style="width: 100px; height: 30px; font-size: 13px; border:1px solid gray;"
                               placeholder="년">
                        <p style="font-size: 20px; margin-left:3px; margin-right:3px;">년</p>
                        <input name="birthMonth" th:field="*{month}"
                               style="width: 80px; height: 30px; font-size: 13px; border:1px solid gray;"
                               placeholder="월">
                        <p style="font-size: 20px; margin-left:3px; margin-right:3px;">월</p>
                        <input name="birthDay" th:field="*{day}"
                               style="width: 80px; height: 30px; font-size: 13px; border:1px solid gray;"
                               placeholder="일">
                        <p style="font-size: 20px; margin-left:3px; margin-right:3px;">일</p>
                    </div>
                </div>
            </div>
            <!-- 가입 버튼 -->
            <div th:if="${errorMessage}" style="text-align: center; font-size: 17px; color: red; font-weight: bold;"
                 class="fieldError">
                <p th:text="${errorMessage}"></p>
            </div>
            <div class="form-btn" style="display: flex; justify-content: center;">
                <button class="btn btn-outline-dark"
                        style="width: 150px; height:30px; font-size: 13px; margin: 0px auto 30px;"
                        type="submit">가
                    입 하 기
                </button>
            </div>
        </form>
    </div>
</main>
<!-- [S]personal-EVLRpX3oSe -->
<div class="personal-EVLRpX3oSe" id="" data-bid="zDlrPxVCq9">
    <div class="footer-container container-lg">
        <div class="footer-top">
            <h1 class="footer-logo">
                <a href="javascript:void(0)">
                    <img src="/api/download/158572bda3ff41db9e6b517e9ffb7d7b" alt="">
                </a>
            </h1>
            <ul class="footer-menulist">
                <li class="footer-menuitem">
                    <a href="javascript:void(0)">
                        <span>이용약관</span>
                    </a>
                </li>
                <li class="footer-menuitem">
                    <a href="javascript:void(0)">
                        <span>개인정보처리방침</span>
                    </a>
                </li>
                <li class="footer-menuitem">
                    <a href="javascript:void(0)">
                        <span>푸터메뉴1</span>
                    </a>
                </li>
                <li class="footer-menuitem">
                    <a href="javascript:void(0)">
                        <span>푸터메뉴2</span>
                    </a>
                </li>
            </ul>
            <ul class="footer-snslist">
                <li class="footer-snsitem">
                    <a class="footer-snslink" href="javascript:void(0)">
                        <img src="../icons/ico_instagram_lightgrey.svg" alt="인스타그램">
                    </a>
                </li>
                <li class="footer-snsitem">
                    <a class="footer-snslink" href="javascript:void(0)">
                        <img src="../icons/ico_youtube_lightgrey.svg" alt="유튜브">
                    </a>
                </li>
                <li class="footer-snsitem">
                    <a class="footer-snslink" href="javascript:void(0)">
                        <img src="../icons/ico_facebook_lightgrey.svg" alt="페이스북">
                    </a>
                </li>
                <li class="footer-snsitem">
                    <a class="footer-snslink" href="javascript:void(0)">
                        <img src="../icons/ico_kakao_lightgrey.svg" alt="카카오톡">
                    </a>
                </li>
            </ul>
        </div>
        <div class="footer-bottom">
            <div class="footer-txt">
                <p> 서울시 영등포구 선유로70 우리벤처</p>
                <p>
                    <span>T. 070-8872-8874</span>
                    <span>E. help@openfield.co.kr</span>
                </p>
            </div>
            <div class="footer-txt">
                <p>2022 BY TEMPLATEHOUSE. ALL RIGHTS RESEVED</p>
            </div>
        </div>
    </div>
</div>
<!-- [E]personal-EVLRpX3oSe -->
<script th:src="@{/js/setting.js}"></script>
<script th:src="@{/js/plugin.js}"></script>
<script th:src="@{/js/template.js}"></script>
<script th:src="@{/js/common.js}"></script>
<script th:src="@{/js/script.js}"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    function toggleAllAgreements() {
        var checkAll = document.getElementById('check-all');
        var agreements = document.querySelectorAll('.contents-agree-box-2 input[type="checkbox"]');

        for (var i = 0; i < agreements.length; i++) {
            agreements[i].checked = checkAll.checked;
        }
    }

    /*]]>*/
</script>
<script th:inline="javascript">
    /*<![CDATA[*/
    var timer;
    var timeLeft = 180; // 3 minutes

    function startTimer() {
        timer = setInterval(function () {
            var minutes = Math.floor(timeLeft / 60);
            var seconds = timeLeft % 60;

            document.getElementById('timer').innerHTML = minutes + ':' + (seconds < 10 ? '0' : '') + seconds;

            if (timeLeft === 0) {
                clearInterval(timer);
                document.getElementById('verificationSection').style.display = 'none';
            }

            timeLeft--;
        }, 1000);
    }

    function requestVerification() {
        // Use Ajax to send email and emailDomain to the server
        var email = document.getElementById('email').value;
        var emailDomain = document.getElementById('emailDomain').value;

        // Get the CSRF token
        var csrfToken = [[${_csrf.token}]];

        // Example using jQuery
        $.ajax({
            type: 'POST',
            url: '/email/join',
            data: JSON.stringify({email: email, emailDomain: emailDomain}),
            contentType: 'application/json',
            headers: {
                'X-CSRF-TOKEN': csrfToken
            },
            success: function (data) {
                document.getElementById('verificationSection').style.display = 'flex';
                startTimer();
                document.getElementById('email').value = email;
                document.getElementById('emailDomain').value = emailDomain;
            },
            error: function (error) {
                console.error('Error sending verification request:', error);
                startTimer();
            }
        });
    }

    function confirmVerification() {
        var verificationCode = document.getElementById('verificationCode').value;
        var email = document.getElementById('email').value;
        var emailDomain = document.getElementById('emailDomain').value;
        // Get the CSRF token
        var csrfToken = [[${_csrf.token}]];
        // Use Ajax to send verification code to the server for confirmation
        // Example using jQuery
        $.ajax({
            type: 'GET',
            url: '/email/confirm?q=' + verificationCode,
            headers: {
                'X-CSRF-TOKEN': csrfToken
            },
            success: function (data) {
                // Handle success, e.g., show a success message
                console.log('Verification confirmed');
                console.log(data);
                // Assuming data.success is a flag indicating successful verification
                if (data === true) {
                    // Update UI to indicate verification success
                    document.getElementById('verificationSection').style.display = 'none'; // Hide the verification section
                    document.getElementById('verificationComplete').style.display = 'block'; // Display the verification complete message
                    document.getElementById('verificationButton').style.display = 'none';

                    // Disable email and emailDomain inputs
                    document.getElementById('email').readOnly = true;
                    document.getElementById('emailDomain').readOnly = true;
                    document.getElementById('email').value = email;
                    document.getElementById('emailDomain').value = emailDomain;
                } else {
                    // Handle verification failure
                    console.error('Verification failed');
                }
            },
            error: function (error) {
                console.error('Error confirming verification:', error);
            }
        });
    }


    function resendVerification() {
        // Use Ajax to resend verification email to the server
        var email = document.getElementById('email').value;
        var emailDomain = document.getElementById('emailDomain').value;

        // Get the CSRF token
        var csrfToken = [[${_csrf.token}]];

        // Example using jQuery
        $.ajax({
            type: 'POST',
            url: '/email/join/resend',
            data: JSON.stringify({email: email, emailDomain: emailDomain}),
            contentType: 'application/json',
            headers: {
                'X-CSRF-TOKEN': csrfToken
            },
            success: function (data) {
                clearInterval(timer);
                timeLeft = 180;
                startTimer();
                document.getElementById('verificationSection').style.display = 'flex';
                document.getElementById('email').value = email;
                document.getElementById('emailDomain').value = emailDomain;
            },
            error: function (error) {
                console.error('Error sending resend request:', error);
            }
        });
    }

    /*]]>*/
</script>
</body>